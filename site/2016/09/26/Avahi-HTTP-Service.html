 <!doctype html>
<html>
<head>
    <title>How to use Avahi to advertise an HTTP service</title>
    <meta charset="utf-8">
    <meta name="author" content="Eric Miller" />
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="icon" href="/files/images/favicon.png">
    <link rel="stylesheet" href="http://localhost:4000/files/css/theme.css">
    <link rel="stylesheet" href="http://localhost:4000/files/css/font.css">
    <link rel="stylesheet" href="http://localhost:4000/files/css/beautifier.css">
    <link rel="stylesheet" href="http://localhost:4000/files/css/main.css">
    <link rel="stylesheet" href="https://code.cdn.mozilla.net/fonts/fira.css">

    <!-- Begin Jekyll SEO tag v2.1.0 -->
<meta property="og:title" content="How to use Avahi to advertise an HTTP service" />
<meta name="description" content="This is a simple guide to how to set up avahi to advertise an HTTP service that a web browser (in this case, Safari’s Bonjour) can detect and hook into. Background: This is running on a server running FreeBSD 10.3.0. Avahi was installed using pkg and set up with the default configuration. It is used largely as a sandbox for experimenting, as well as being a media/file server and a light webserver. Its capacity as a media server is fulfilled using Plex, so I want to advertise the existence of the Plex server for easy use. First, install avahi with the package manager of your choice. In the case of FreeBSD and pkg, pkg install avahi -y. If using FreeBSD, you’ll need to enable the service by adding avahi_daemon_enable=&quot;YES&quot; to /etc/rc.conf. In GNU/Linux distros, this is typically not required. The avahi service can now be started/stopped/restarted with sudo service avahi-daemon &lt;start/stop/restart&gt;. Next, find the avahi services directory. With my installation, it is located in /usr/local/etc/avahi/services. On other GNU/Linux distros, it may also be found in /etc/avahi/services. In the services directory, you will likely see some default services aleady set up. For example, I already had sftp-ssh.service amd ssh.service in mine. Create a new file called &lt;your-service&gt;.service. In my case, this is plex.service. Within that file, add the following (which I shamelessly stole most of from here): &lt;?xml version=&quot;1.0&quot; standalone=&#39;no&#39;?&gt;&lt;!--*-nxml-*--&gt; &lt;!DOCTYPE service-group SYSTEM &quot;avahi-service.dtd&quot;&gt; &lt;service-group&gt; &lt;name replace-wildcards=&quot;yes&quot;&gt;%h &lt;YOUR_HTTP_SERVICE&gt;&lt;/name&gt; &lt;service&gt; &lt;type&gt;_http._tcp&lt;/type&gt; &lt;port&gt;&lt;YOUR_PORT&gt;&lt;/port&gt; &lt;/service&gt; &lt;/service-group&gt; Now, restart avahi with the command sudo service avahi-daemon restart. The new service will now be viewable via bonjour clients, such as Safari and dns-sd (see below)." />
<meta property="og:description" content="This is a simple guide to how to set up avahi to advertise an HTTP service that a web browser (in this case, Safari’s Bonjour) can detect and hook into. Background: This is running on a server running FreeBSD 10.3.0. Avahi was installed using pkg and set up with the default configuration. It is used largely as a sandbox for experimenting, as well as being a media/file server and a light webserver. Its capacity as a media server is fulfilled using Plex, so I want to advertise the existence of the Plex server for easy use. First, install avahi with the package manager of your choice. In the case of FreeBSD and pkg, pkg install avahi -y. If using FreeBSD, you’ll need to enable the service by adding avahi_daemon_enable=&quot;YES&quot; to /etc/rc.conf. In GNU/Linux distros, this is typically not required. The avahi service can now be started/stopped/restarted with sudo service avahi-daemon &lt;start/stop/restart&gt;. Next, find the avahi services directory. With my installation, it is located in /usr/local/etc/avahi/services. On other GNU/Linux distros, it may also be found in /etc/avahi/services. In the services directory, you will likely see some default services aleady set up. For example, I already had sftp-ssh.service amd ssh.service in mine. Create a new file called &lt;your-service&gt;.service. In my case, this is plex.service. Within that file, add the following (which I shamelessly stole most of from here): &lt;?xml version=&quot;1.0&quot; standalone=&#39;no&#39;?&gt;&lt;!--*-nxml-*--&gt; &lt;!DOCTYPE service-group SYSTEM &quot;avahi-service.dtd&quot;&gt; &lt;service-group&gt; &lt;name replace-wildcards=&quot;yes&quot;&gt;%h &lt;YOUR_HTTP_SERVICE&gt;&lt;/name&gt; &lt;service&gt; &lt;type&gt;_http._tcp&lt;/type&gt; &lt;port&gt;&lt;YOUR_PORT&gt;&lt;/port&gt; &lt;/service&gt; &lt;/service-group&gt; Now, restart avahi with the command sudo service avahi-daemon restart. The new service will now be viewable via bonjour clients, such as Safari and dns-sd (see below)." />
<link rel="canonical" href="http://localhost:4000/2016/09/26/Avahi-HTTP-Service.html" />
<meta property="og:url" content="http://localhost:4000/2016/09/26/Avahi-HTTP-Service.html" />
<meta property="og:site_name" content="Eric Miller’s Website" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2016-09-26T00:00:00-05:00" />
<script type="application/ld+json">
{"@context": "http://schema.org",
"@type": "BlogPosting",
"headline": "How to use Avahi to advertise an HTTP service",
"datePublished": "2016-09-26T00:00:00-05:00",
"description": "This is a simple guide to how to set up avahi to advertise an HTTP service that a web browser (in this case, Safari’s Bonjour) can detect and hook into. Background: This is running on a server running FreeBSD 10.3.0. Avahi was installed using pkg and set up with the default configuration. It is used largely as a sandbox for experimenting, as well as being a media/file server and a light webserver. Its capacity as a media server is fulfilled using Plex, so I want to advertise the existence of the Plex server for easy use. First, install avahi with the package manager of your choice. In the case of FreeBSD and pkg, pkg install avahi -y. If using FreeBSD, you’ll need to enable the service by adding avahi_daemon_enable=&quot;YES&quot; to /etc/rc.conf. In GNU/Linux distros, this is typically not required. The avahi service can now be started/stopped/restarted with sudo service avahi-daemon &lt;start/stop/restart&gt;. Next, find the avahi services directory. With my installation, it is located in /usr/local/etc/avahi/services. On other GNU/Linux distros, it may also be found in /etc/avahi/services. In the services directory, you will likely see some default services aleady set up. For example, I already had sftp-ssh.service amd ssh.service in mine. Create a new file called &lt;your-service&gt;.service. In my case, this is plex.service. Within that file, add the following (which I shamelessly stole most of from here): &lt;?xml version=&quot;1.0&quot; standalone=&#39;no&#39;?&gt;&lt;!--*-nxml-*--&gt; &lt;!DOCTYPE service-group SYSTEM &quot;avahi-service.dtd&quot;&gt; &lt;service-group&gt; &lt;name replace-wildcards=&quot;yes&quot;&gt;%h &lt;YOUR_HTTP_SERVICE&gt;&lt;/name&gt; &lt;service&gt; &lt;type&gt;_http._tcp&lt;/type&gt; &lt;port&gt;&lt;YOUR_PORT&gt;&lt;/port&gt; &lt;/service&gt; &lt;/service-group&gt; Now, restart avahi with the command sudo service avahi-daemon restart. The new service will now be viewable via bonjour clients, such as Safari and dns-sd (see below).",
"url": "http://localhost:4000/2016/09/26/Avahi-HTTP-Service.html"}</script>
<!-- End Jekyll SEO tag -->

</head>

<body class="text_good_2">
    <header id="blog_header">
        <nav class="top_nav_bar">
            <ul>
                <li><a href="http://localhost:4000/index.html" class="">
                    <span class="fa fa-home"></span> Home
                </a></li>
                <li><a href="http://localhost:4000/posts/index.html">
                    <span class="fa fa-home"></span> All Posts
                </a></li>
                <li style="float: right !important"><a href="http://localhost:4000//about/index.html" class="">
                    <span class="fa fa-user"></span> About Me
                </a></li>
                <li style="float: right !important"><span id="search_bar">
                    <span class="fa fa-search"></span>&nbsp&nbsp<input id="search_bar_input" type="text">
                </span></li>
            </ul>
        </nav>
    </header>
    <div id="body_container">

        <div class="main_side_container">
        <div id="Post" class="Post text_good_2">
    <article class="Article">
        
        
        <a id="post_link" class="post_link" href="/2016/09/26/Avahi-HTTP-Service.html">How to use Avahi to advertise an HTTP service</a>
        
        
            <br>
            <br>
            
        
        <p>This is a simple guide to how to set up avahi to advertise an HTTP service that a web browser (in this case, Safari’s Bonjour) can detect and hook into.</p>

<p>Background: This is running on a server running FreeBSD 10.3.0. Avahi was installed using pkg and set up with the default configuration.
It is used largely as a sandbox for experimenting, as well as being a media/file server and a light webserver.
Its capacity as a media server is fulfilled using <a href="https://www.plex.tv">Plex</a>, so I want to advertise the existence of the Plex server for easy use.</p>

<p>First, install avahi with the package manager of your choice. In the case of FreeBSD and pkg, <code class="highlighter-rouge">pkg install avahi -y</code>.
If using FreeBSD, you’ll need to enable the service by adding <code class="highlighter-rouge">avahi_daemon_enable="YES"</code> to <code class="highlighter-rouge">/etc/rc.conf</code>.
In GNU/Linux distros, this is typically not required.
The avahi service can now be started/stopped/restarted with <code class="highlighter-rouge">sudo service avahi-daemon &lt;start/stop/restart&gt;</code>.</p>

<p>Next, find the avahi services directory. With my installation, it is located in <code class="highlighter-rouge">/usr/local/etc/avahi/services</code>.
On other GNU/Linux distros, it may also be found in <code class="highlighter-rouge">/etc/avahi/services</code>.
In the services directory, you will likely see some default services aleady set up.
For example, I already had <code class="highlighter-rouge">sftp-ssh.service</code> amd <code class="highlighter-rouge">ssh.service</code> in mine.</p>

<p>Create a new file called <code class="highlighter-rouge">&lt;your-service&gt;.service</code>. In my case, this is <code class="highlighter-rouge">plex.service</code>.
Within that file, add the following (which I shamelessly stole most of from <a href="http://holyarmy.org/2008/01/advertising-linux-services-via-avahibonjour/">here</a>):</p>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="cp">&lt;?xml version="1.0" standalone='no'?&gt;</span><span class="c">&lt;!--*-nxml-*--&gt;</span>
<span class="cp">&lt;!DOCTYPE service-group SYSTEM "avahi-service.dtd"&gt;</span>
<span class="nt">&lt;service-group&gt;</span>
<span class="nt">&lt;name</span> <span class="na">replace-wildcards=</span><span class="s">"yes"</span><span class="nt">&gt;</span>%h <span class="nt">&lt;YOUR_HTTP_SERVICE&gt;&lt;/name&gt;</span>
<span class="nt">&lt;service&gt;</span>
<span class="nt">&lt;type&gt;</span>_http._tcp<span class="nt">&lt;/type&gt;</span>
<span class="nt">&lt;port&gt;&lt;YOUR_PORT&gt;&lt;/port&gt;</span>
<span class="nt">&lt;/service&gt;</span>
<span class="nt">&lt;/service-group&gt;</span>
</code></pre>
</div>

<p>Now, restart avahi with the command <code class="highlighter-rouge">sudo service avahi-daemon restart</code>.
The new service will now be viewable via bonjour clients, such as Safari and dns-sd (see below).</p>

<p><img src="/files/images/posts/2016-09-26-avahi-in-safari.png" alt="Avahi-Safari" />
<img src="/files/images/posts/2016-09-26-avahi-in-terminal.png" alt="Avahi-dns-sd" /></p>

        <p></p>
        <span class="tags">Tags</span>
        
        <a class="tag" href="#">avahi</a>
        
        <a class="tag" href="#">bonjour</a>
        
        <a class="tag" href="#">zeroconf</a>
        
        <a class="tag" href="#">plex</a>
        
    </article>
</div>

        </div>
        <aside class="sidebar">
            <section class="sidebar_about_me">
                <img id="my_image"src="http://localhost:4000/files/images/my/Team1675_MentorHeadshots-106.png">
                <div>
                    <p id="note">
                        Computer Scientist, Mentor, Machinist
                    </p>
                </div>
            </section>
            <span class="dashed"></span>
            <section class="sidebar_latest_post text_good_2">Latest Posts
                <p></p>
            
                
                <div class="latest_post_container">
                    <p>
                        <a class="latest_post" href="/2017/01/17/How-to-Secure-Your-Online-Life.html">
                            How to Secure Your Online Life
                        </a>
                        <span class="latest_post_date">17 January 2017</span>
                    </p>
                </div>
                
            
                
                <div class="latest_post_container">
                    <p>
                        <a class="latest_post" href="/2016/11/12/2016-Macbook-Pro-Impressions.html">
                            2016 MacBook Pro Impressions
                        </a>
                        <span class="latest_post_date">12 November 2016</span>
                    </p>
                </div>
                
            
                
                <div class="latest_post_container">
                    <p>
                        <a class="latest_post" href="/2016/09/26/Avahi-HTTP-Service.html">
                            How to use Avahi to advertise an HTTP service
                        </a>
                        <span class="latest_post_date">26 September 2016</span>
                    </p>
                </div>
                
            
                
                <div class="latest_post_container">
                    <p>
                        <a class="latest_post" href="/2016/09/24/Jurassic-World-Reversal.html">
                            Jurassic World with Chris Pratt as the Velociraptors and a Velociraptor as Chris Pratt
                        </a>
                        <span class="latest_post_date">24 September 2016</span>
                    </p>
                </div>
                
            
                
                <div class="latest_post_container">
                    <p>
                        <a class="latest_post" href="/2016/09/14/A-Dramatic-Reenactment-of-the-iPhone-7's-Development-Pitch.html">
                            A Dramatic Re-enactment of the iPhone 7&#39;s Development Pitch
                        </a>
                        <span class="latest_post_date">14 September 2016</span>
                    </p>
                </div>
                
            
                
            
                
            
            </section>
            <span class="dashed"></span>
            <section class="sidebar_latest_post text_good_2">
                <ul id="links">
                    <li>Links</li>
                    <span class="links_dashed"></span>

                    <li style="margin-top:10%"><a href="http://localhost:4000//index.html">Personal Page</a></li>
                    <li><a href="https://linkedin.com/in/eric-miller">LinkedIn</a></li>
                    <li><a href="http://www.team1675.net">Team 1675</a></li>
                </ul>
            </section>
            <section class="sidebar_tags">Tags
                <br>
                
                
                
            </section>
        </aside>
    </div>
</body>
</html>
